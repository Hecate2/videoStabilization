%% Clear
clear
clc
close all

%% Read data
% 生成 VideoReader 实例来读入视频，转为元胞（元胞的每个元素是一帧）
v = VideoReader('../data/01_input.avi');
video = {};
while hasFrame(v)
    video = [video, readFrame(v)];
end

%% Video stabilization
features = featureExtract(video);
M_i, M_cummulative = motionEstimator(features);
M_smooth = smooth_forward(M_i, M_cummulative);
% 接下来对原来视频中从第二帧到最后一帧中每帧的坐标(x,y)

